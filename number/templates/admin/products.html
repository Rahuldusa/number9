{% include 'admin/company_profile.html' %}
{% load static %}
{% block content %}


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
       body {
        position: relative;
        overflow: hidden;  /* No scrolling on the body */
        height: 100vh; /* Ensure full viewport height for the body */
        margin: 0;
        padding: 0;
    }
    
    .small-plus-button {
    font-size: 4rem;
    color: black;
    text-align: center;
    cursor: pointer;
    position: absolute;
    top: 70px; /* Align with the breadcrumb */
    right: 70px; /* Adjust this value to control space between breadcrumb and button */
    z-index: 10000;
}


        .entry-form {
            margin-top: 20px;
            
        }
        #entryForm {
    display: block;
    /* padding: 20px;  Ensure enough space inside the form */
    height: 700px;
    overflow-y: auto;
    font-family: 'Arial MT Rounded'
}


        .product-list {
            margin-top: 20px;
        }

        .product-card {
    padding: 20px;
    margin-bottom: 20px;
    position: relative;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    background-color: #fff;
    font-family: 'Arial MT Rounded';
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    flex-wrap: wrap; /* Add this to ensure proper wrapping */
    width: 100%; /* Ensure the card takes up full width */
    margin-top: -20px;
    margin-left: -23px;
}

        .form-container {
            display: flex;
            flex: 1;
            width: 90%;
            margin-left: 10px;
        }

        .form-column {
            flex: 1;
            margin-right: 20px;
            display: flex;
            flex-direction: column;
        }

        .form-column:last-child {
            margin-right: 0;
        }

        .form-group {
            margin-bottom: 1rem;
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: grey;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .form-control {
            border: none;
            border-bottom: 1px solid grey;
            border-radius: 0;
            width: 100%;
            padding: 10px;
            margin-bottom: 0.5rem;
            background-color: transparent;
            transition: background-color 0s;
            font-size: 16px;
            margin-top: 2px;
        }

        .form-control:focus {
            box-shadow: none;
            outline: none;
        }

        .form-control[readonly] {
            border: none;
        }

        .card-buttons {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-left: 20px;
        }

        .delete-button, .edit-button {
            margin-bottom: 5px;
        }

        .submit-button {
    position: relative;
    z-index: 1000;  /* Adjust this value to ensure the button is above other elements */
    bottom: 20px;
    right: -500px;
    display: block;  /* Ensure it's visible */
}




        .divider {
            border-top: 1px solid grey;
            margin: 10px 0;
        }

        .inline-inputs {
            display: flex;
            align-items: center;
        }

        .inline-inputs label {
            margin-right: 5px;
        }

        .inline-inputs input {
            width: 150px;
            margin-right: 5px;
        }

        .d-flex {
            display: flex;
            align-items: center;
        }

        .editable .form-control {
            border-bottom: 1px solid grey;
            background-color: white !important;
        }

        /* Custom Styles for Display Mode */
        .display-mode .form-control {
            border: none;
            background-color: transparent;
            font-size: 16px; /* Example font size */
            color: #333; /* Example font color */
        }

        .display-mode .form-group label {
            font-size: 12px; /* Example label font size */
            font-weight: normal; /* Example label font weight */
        }

        .display-mode .form-control {
            margin-top: -20px;
            margin-left: 0px;
            padding-left: 0px;
        }

        .display-mode .card-buttons {
            position: static;
            margin-left: 0;
        }

        /* Inline Editing Styles */
        .editing .form-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
        }

        .editing .form-group label {
            margin-bottom: 5px;
            color: grey;
            font-size: 14px;
        }

        .editing .form-control {
            border-bottom: 1px solid grey;
            background-color: white;
            font-size: 16px;
        }

        .editing .form-column {
            flex: 1;
            margin-right: 20px;
        }

        .editing .form-column:last-child {
            margin-right: 0;
        }
        .scrollable-content {
        max-height: calc(100vh - 65px);  /* Full height minus top margins or paddings */
        overflow-y: auto;  /* Enable vertical scrolling */
        overflow-x: hidden;  /* Disable horizontal scrolling */
        padding-top: 0px;  /* Optional padding inside the content area */
        margin-top: 0px;
    }

    /* Hide the scrollbar, optional for design */
    .scrollable-content::-webkit-scrollbar {
        width: 0px;  /* Narrow scrollbar width */
    }

    .scrollable-content::-webkit-scrollbar-thumb {
        background-color: #888;  /* Scrollbar color */
    }

    .scrollable-content::-webkit-scrollbar-thumb:hover {
        background-color: #555;  /* Hover effect on scrollbar */
    }
.sidebar {
    position: absolute;
    top: 0;
    left: 0;
    height: 100vh; 
    width: 230px; 
    overflow-y: auto;
    z-index: 1000;
    margin-top: 66px;
}

.content-area {
    margin-left: 260px;  
    width: calc(100% - 260px);
    min-height: 100vh;  
    display: flex;
    flex-direction: column; 
}

.breadcrumb {
    font-size: 18px;
    color: black;
    flex: 1;
    margin-top: 25px;
    margin-left: 260px;
    font-family: 'Arial MT Rounded';
    position: relative; /* Add this to position the breadcrumb */
}
        .container::-webkit-scrollbar {
            width: 0px;
            background: transparent; /* For Chrome/Safari/Webkit */
        }
    
        .container {
            scrollbar-width: none; /* For Firefox */
            -ms-overflow-style: none;  /* For Internet Explorer and Edge */
        }
       
    
        .bold-text {
            font-weight: bold;
        }
        .card-buttons {
    display: flex; /* Aligns the buttons in a row */
    gap: 10px; /* Adds space between the buttons */
    justify-content: flex-start; /* Align buttons to the left, adjust as needed */
    align-items: center; /* Vertically aligns the buttons in the center */
}

.edit-button, .delete-button {
    margin: 0; /* Remove default margin that might affect layout */
    background-color: white;
    color: black;
    outline: none !important;
    box-shadow: none !important; /* Remove the box shadow */
    border: none !important; /* Remove the border */
}
 .delete-button {
    margin: 0; /* Remove default margin that might affect layout */
    background-color: white;
    color: red;
    outline: none !important;
    box-shadow: none !important; /* Remove the box shadow */
    border: none !important; /* Remove the border */
}
.btn-custom {
      background-color: transparent; /* Set background color */
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      display: flex;
      align-items: center; /* Center the image and text vertically */
      gap: 10px; /* Gap between image and text */
      margin-left: 75%;
      margin-top: 25px;
      padding: 0;
      position: fixed;
    }
    .btn-custom img {
    width: 35px; /* Ensure the image has a proper size */
    height: 35px;
    margin: 0;
    padding: 0;
    display: inline-block; /* Make sure it's displayed properly */
    position: fixed;
}
.btn-edit img {
    width: 40px; /* Ensure the image has a proper size */
    height: auto;
    margin: 0;
    padding: 0;
    display: inline-block; /* Make sure it's displayed properly */
}

.btn-edit {
    background-color: transparent;
    border: none;
    cursor: pointer;
    padding: 0; /* Avoid extra padding around the icon */
    outline: none;
}
.btn-delete img {
    width: 40px; /* Ensure the image has a proper size */
    height: auto;
    margin: 0;
    padding: 0;
    display: inline-block; /* Make sure it's displayed properly */
}

.btn-delete {
    background-color: transparent;
    border: none;
    cursor: pointer;
    padding: 0; /* Avoid extra padding around the icon */
    outline: none;
}

/* Tablet screens (between 768px and 1023px) */
@media (min-width: 768px) and (max-width: 1023px) {
    .breadcrumb {
        margin-left: 20px;
        margin-top: 20px;
        font-size: 16px;
    }
    .btn-custom {
        margin-left: 150px;
        left: 50%;
        transform: translateX(-50%);
    }
    .scrollable-content {
        margin-left: 0px !important;
    }
    .product-card {
        padding: 20px;
        margin-bottom: 20px;
        position: relative;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        background-color: #fff;
        font-family: 'Arial MT Rounded';
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        flex-wrap: wrap;
        width: 100%;
        margin-top: 0px;
        margin-left: 0px;
    }
    .submit-button img {
        width: 40px;  /* Adjust the size */
        height: 40px;
        cursor: pointer;  /* Make it clickable */
    }
    .submit-button {
        align-items: center;
        gap: 10px;
        margin-left: 700px;
        margin-top: 0px;
        position:unset;
    }
}

/* Mobile screens (less than 768px) */
@media (max-width: 767px) {
    .breadcrumb {
        display: none;
    }
    .scrollable-content {
        margin-left: 0px !important;
    }
    .form-container {
        display: block;  /* Stack form columns vertically */
    }
    .btn-custom {
        margin-left: 160px;
        left: 50%;
        transform: translateX(-50%);
    }
    .product-card {
        width: 100%; /* Ensure the card takes up full width */
        margin-top: 0px;
        margin-left: 0px;
    }
    .card-buttons {
        justify-content: space-around; /* Space buttons evenly for mobile screens */
    }
    .btn-edit img, .btn-delete img {
        width: 24px; /* Adjust button icon size for mobile */
        height: 24px;
    }
    .submit-button img {
        width: 40px;  /* Adjust the size */
        height: 40px;
        cursor: pointer;  /* Make it clickable */
    }
    .submit-button {
        align-items: center;
        gap: 10px;
        margin-left:280px;
        margin-top: 0px;
        position:unset;
    }
    /* .inline-inputs input {
        width: 0px; 
        margin-right: 0px; 
    } */
}
    </style>

<body>
    <div class="breadcrumb">
        <span>My Companies</span> &ndash; <span>{{ company.name }}</span> &ndash; <span class="bold-text">Products and Services</span>
    
    <div class="btn btn-custom" onclick="toggleForm()">
        <img src="{% static 'images/add.png' %}" alt="Add">
    </div>
</div>
    <div class="scrollable-content">
       

        <div id="entryForm" class="entry-form">
            <div class="form-container">
                <div class="form-column">
                    <div class="form-group">
                        <label for="name">Product Title</label>
                        <input type="text" class="form-control" id="name" required>
                    </div>
                    <div class="form-group">
                        <label for="description">Description</label>
                        <textarea class="form-control" id="description" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="industry">Industry / Sector</label>
                        <select class="form-control" id="industry" required>
                            
                            <option value="">Select Industry / Sector</option>
                            <option value="2/3 Wheelers">2/3 Wheelers</option>
                            <option value="Abrasives & Bearings">Abrasives & Bearings</option>
                            <option value="Advertising & Media Agencies">Advertising & Media Agencies</option>
                            <option value="Aerospace & Defense">Aerospace & Defense</option>
                            <option value="Airline">Airline</option>
                            <option value="Airport & Airport services">Airport & Airport services</option>
                            <option value="Aluminium">Aluminium</option>
                            <option value="Aluminium, Copper & Zinc Products">Aluminium, Copper & Zinc Products</option>
                            <option value="Amusement Parks/ Other Recreation">Amusement Parks/ Other Recreation</option>
                            <option value="Animal Feed">Animal Feed</option>
                            <option value="Asset Management Company">Asset Management Company</option>
                            <option value="Auto Components & Equipments">Auto Components & Equipments</option>
                            <option value="Auto -Dealer">Auto -Dealer</option>
                            <option value="Biotechnology">Biotechnology</option>
                            <option value="Breweries & Distilleries">Breweries & Distilleries</option>
                            <option value="Business Process Outsourcing (BPO)/ Knowledge Process Outsourcing (KPO)">Business Process Outsourcing (BPO)/ Knowledge Process Outsourcing (KPO)</option>
                            <option value="Cables - Electricals">Cables - Electricals</option>
                            <option value="Castings & Forgings">Castings & Forgings</option>
                            <option value="Cement & Cement Products">Cement & Cement Products</option>
                            <option value="Ceramics">Ceramics</option>
                            <option value="Cigarettes & Tobacco Products">Cigarettes & Tobacco Products</option>
                            <option value="Civil Construction">Civil Construction</option>
                            <option value="Coal">Coal</option>
                            <option value="Commercial Vehicles">Commercial Vehicles</option>
                            <option value="Commodity Chemicals">Commodity Chemicals</option>
                            <option value="Compressors, Pumps & Diesel Engines">Compressors, Pumps & Diesel Engines</option>
                            <option value="Computers - Software & Consulting">Computers - Software & Consulting</option>
                            <option value="Computers Hardware & Equipments">Computers Hardware & Equipments</option>
                            <option value="Construction Vehicles">Construction Vehicles</option>
                            <option value="Consulting Services">Consulting Services</option>
                            <option value="Consumer Electronics">Consumer Electronics</option>
                            <option value="Copper">Copper</option>
                            <option value="Dairy Products">Dairy Products</option>
                            <option value="Data Processing Services">Data Processing Services</option>
                            <option value="Depositories, Clearing Houses and Other Intermediaries">Depositories, Clearing Houses and Other Intermediaries</option>
                            <option value="Digital Entertainment">Digital Entertainment</option>
                            <option value="Distributors">Distributors</option>
                            <option value="Diversified">Diversified</option>
                            <option value="Diversified Commercial Services">Diversified Commercial Services</option>
                            <option value="Diversified consumer products">Diversified consumer products</option>
                            <option value="Diversified FMCG">Diversified FMCG</option>
                            <option value="Diversified Metals">Diversified Metals</option>
                            <option value="Diversified Retail">Diversified Retail</option>
                            <option value="Dredging">Dredging</option>
                            <option value="Dyes And Pigments">Dyes And Pigments</option>
                            <option value="Edible Oil">Edible Oil</option>
                            <option value="Education">Education</option>
                            <option value="E-Learning">E-Learning</option>
                            <option value="Electrodes & Refractories">Electrodes & Refractories</option>
                            <option value="Electronic Media">Electronic Media</option>
                            <option value="E-Retail/ E-Commerce">E-Retail/ E-Commerce</option>
                            <option value="Exchange and Data Platform">Exchange and Data Platform</option>
                            <option value="Explosives">Explosives</option>
                            <option value="Ferro & Silica Manganese">Ferro & Silica Manganese</option>
                            <option value="Fertilizers">Fertilizers</option>
                            <option value="Film Production, Distribution & Exhibition">Film Production, Distribution & Exhibition</option>
                            <option value="Financial Institution">Financial Institution</option>
                            <option value="Financial Products Distributor">Financial Products Distributor</option>
                            <option value="Financial Technology (Fintech)">Financial Technology (Fintech)</option>
                            <option value="Footwear">Footwear</option>
                            <option value="Forest Products">Forest Products</option>
                            <option value="Furniture, Home Furnishing">Furniture, Home Furnishing</option>
                            <option value="Furniture, Home Furnishing, Flooring">Furniture, Home Furnishing, Flooring</option>
                            <option value="Garments & Apparels">Garments & Apparels</option>
                            <option value="Gas Transmission/Marketing">Gas Transmission/Marketing</option>
                            <option value="Gems, Jewellery And Watches">Gems, Jewellery And Watches</option>
                            <option value="General Insurance">General Insurance</option>
                            <option value="Glass - Consumer">Glass - Consumer</option>
                            <option value="Glass - Industrial">Glass - Industrial</option>
                            <option value="Granites & Marbles">Granites & Marbles</option>
                            <option value="Healthcare Research, Analytics & Technology">Healthcare Research, Analytics & Technology</option>
                            <option value="Healthcare Service Provider">Healthcare Service Provider</option>
                            <option value="Heavy Electrical Equipment">Heavy Electrical Equipment</option>
                            <option value="Holding Company">Holding Company</option>
                            <option value="Hospital">Hospital</option>
                            <option value="Hotels & Resorts">Hotels & Resorts</option>
                            <option value="Household Appliances">Household Appliances</option>
                            <option value="Household Products">Household Products</option>
                            <option value="Houseware">Houseware</option>
                            <option value="Housing Finance Company">Housing Finance Company</option>
                            <option value="Industrial Gases">Industrial Gases</option>
                            <option value="Industrial Machinery">Industrial Machinery</option>
                            <option value="Industrial Minerals">Industrial Minerals</option>
                            <option value="Industrial Products">Industrial Products</option>
                            <option value="Integrated Power Utilities">Integrated Power Utilities</option>
                            <option value="Internet & Catalogue Retail">Internet & Catalogue Retail</option>
                            <option value="Investment Company">Investment Company</option>
                            <option value="Iron & Steel">Iron & Steel</option>
                            <option value="Iron & Steel Products">Iron & Steel Products</option>
                            <option value="IT Enabled Services">IT Enabled Services</option>
                            <option value="Jute & Jute Products">Jute & Jute Products</option>
                            <option value="Leather And Leather Products">Leather And Leather Products</option>
                            <option value="Leisure Products">Leisure Products</option>
                            <option value="Life Insurance">Life Insurance</option>
                            <option value="Logistics Solution Provider">Logistics Solution Provider</option>
                            <option value="LPG/CNG/PNG/LNG Supplier">LPG/CNG/PNG/LNG Supplier</option>
                            <option value="Lubricants">Lubricants</option>
                            <option value="Meat Products including Poultry">Meat Products including Poultry</option>
                            <option value="Media & Entertainment">Media & Entertainment</option>
                            <option value="Medical Equipment & Supplies">Medical Equipment & Supplies</option>
                            <option value="Microfinance Institutions">Microfinance Institutions</option>
                            <option value="Mutual Fund Scheme - ETF">Mutual Fund Scheme - ETF</option>
                            <option value="Non Banking Financial Company (NBFC)">Non Banking Financial Company (NBFC)</option>
                            <option value="Offshore Support Solution Drilling">Offshore Support Solution Drilling</option>
                            <option value="Oil Equipment & Services">Oil Equipment & Services</option>
                            <option value="Oil Exploration & Production">Oil Exploration & Production</option>
                            <option value="Other Agricultural Products">Other Agricultural Products</option>
                            <option value="Other Bank">Other Bank</option>
                            <option value="Other Beverages">Other Beverages</option>
                            <option value="Other Capital Market related Services">Other Capital Market related Services</option>
                            <option value="Other Construction Materials">Other Construction Materials</option>
                            <option value="Other Consumer Services">Other Consumer Services</option>
                            <option value="Other Electrical Equipment">Other Electrical Equipment</option>
                            <option value="Other Financial Services">Other Financial Services</option>
                            <option value="Other Food Products">Other Food Products</option>
                            <option value="Other Industrial Products">Other Industrial Products</option>
                            <option value="Other Telecom Services">Other Telecom Services</option>
                            <option value="Other Textile Products">Other Textile Products</option>
                            <option value="Other Utilities">Other Utilities</option>
                            <option value="Packaged Foods">Packaged Foods</option>
                            <option value="Packaging">Packaging</option>
                            <option value="Paints">Paints</option>
                            <option value="Paper & Paper Products">Paper & Paper Products</option>
                            <option value="Passenger Cars & Utility Vehicles">Passenger Cars & Utility Vehicles</option>
                            <option value="Personal Care">Personal Care</option>
                            <option value="Pesticides & Agrochemicals">Pesticides & Agrochemicals</option>
                            <option value="Petrochemicals">Petrochemicals</option>
                            <option value="Pharmaceuticals">Pharmaceuticals</option>
                            <option value="Pharmacy Retail">Pharmacy Retail</option>
                            <option value="Pig Iron">Pig Iron</option>
                            <option value="Plastic Products - Consumer">Plastic Products - Consumer</option>
                            <option value="Plastic Products - Industrial">Plastic Products - Industrial</option>
                            <option value="Plywood Boards/ Laminates">Plywood Boards/ Laminates</option>
                            <option value="Port & Port services">Port & Port services</option>
                            <option value="Power - Transmission">Power - Transmission</option>
                            <option value="Power Generation">Power Generation</option>
                            <option value="Power Trading">Power Trading</option>
                            <option value="Precious Metals">Precious Metals</option>
                            <option value="Print Media">Print Media</option>
                            <option value="Printing & Publication">Printing & Publication</option>
                            <option value="Private Sector Bank">Private Sector Bank</option>
                            <option value="Public Sector Bank">Public Sector Bank</option>
                            <option value="Railway Wagons">Railway Wagons</option>
                            <option value="Ratings">Ratings</option>
                            <option value="Real Estate Investment Trusts (REITs)">Real Estate Investment Trusts (REITs)</option>
                            <option value="Real Estate related services">Real Estate related services</option>
                            <option value="Refineries & Marketing">Refineries & Marketing</option>
                            <option value="Residential, Commercial Projects">Residential, Commercial Projects</option>
                            <option value="Restaurants">Restaurants</option>
                            <option value="Road Assets–Toll, Annuity, Hybrid-Annuity">Road Assets–Toll, Annuity, Hybrid-Annuity</option>
                            <option value="Road Transport">Road Transport</option>
                            <option value="Rubber">Rubber</option>
                            <option value="Sanitary Ware">Sanitary Ware</option>
                            <option value="Seafood">Seafood</option>
                            <option value="Ship Building & Allied Services">Ship Building & Allied Services</option>
                            <option value="Shipping">Shipping</option>
                            <option value="Software Products">Software Products</option>
                            <option value="Speciality Retail">Speciality Retail</option>
                            <option value="Specialty Chemicals">Specialty Chemicals</option>
                            <option value="Sponge Iron">Sponge Iron</option>
                            <option value="Stationary">Stationary</option>
                            <option value="Stockbroking & Allied">Stockbroking & Allied</option>
                            <option value="Sugar">Sugar</option>
                            <option value="Tea & Coffee">Tea & Coffee</option>
                            <option value="Telecom - Equipment & Accessories">Telecom - Equipment & Accessories</option>
                            <option value="Telecom - Cellular & Fixed line services">Telecom - Cellular & Fixed line services</option>
                            <option value="Telecom - Infrastructure">Telecom - Infrastructure</option>
                            <option value="Tour, Travel Related Services">Tour, Travel Related Services</option>
                            <option value="Tractors">Tractors</option>
                            <option value="Trading - Chemicals">Trading - Chemicals</option>
                            <option value="Trading - Metals">Trading - Metals</option>
                            <option value="Trading - Minerals">Trading - Minerals</option>
                            <option value="Trading - Textile Products">Trading - Textile Products</option>
                            <option value="Trading & Distributors">Trading & Distributors</option>
                            <option value="Trading Coal">Trading Coal</option>
                            <option value="Transport Related Services">Transport Related Services</option>
                            <option value="TV Broadcasting & Software Production">TV Broadcasting & Software Production</option>
                            <option value="Tyres & Rubber Products">Tyres & Rubber Products</option>
                            <option value="Waste Management">Waste Management</option>
                            <option value="Water Supply & Management">Water Supply & Management</option>
                            <option value="Wellness">Wellness</option>
                            <option value="Zinc">Zinc</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="type_of_business">Type of Business</label>
                        <select class="form-control" id="type_of_business" required>
                            <option value="" disabled selected>Select Type of Business</option>
                            <option value="B2B">B2B (Business to Business)</option>
                            <option value="B2G">B2G (Business to Government)</option>
                            <option value="B2C">B2C (Business to Consumer)</option>
                            <option value="B2B2B">B2B2B (Business to Business to Business)</option>
                            <option value="D2C">D2C (Direct to Consumer)</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="problem_solved">Problems Solved</label>
                        <input type="text" class="form-control" id="problem_solved" required>
                    </div>
                </div>
                <div class="form-column">
                    <div class="form-group">
                        <label for="launch_date">Launch Date</label>
                        <input type="date" class="form-control" id="launch_date" required>
                    </div>
                    <div class="form-group">
                        <label>Three Year Revenue & Profit (INR lacs)</label>
                        <div class="inline-inputs">
                            <label>Current Year (YTD):</label>
                        </div>
                        <div class="inline-inputs">
                            <label>Revenue= </label>
                            <input type="number" class="form-control" id="current_year_revenue" required>
                            <label>P/L =</label>
                            <input type="number" class="form-control" id="current_year_pl" required>
                        </div>
                        <div class="inline-inputs">
                            <label>Previous Year:</label>
                        </div>
                        <div class="inline-inputs">
                            <label>Revenue= </label>
                            <input type="number" class="form-control" id="previous_year_revenue" required>
                            <label>P/L=</label>
                            <input type="number" class="form-control" id="previous_year_pl" required>
                        </div>
                        <div class="inline-inputs">
                            <label>A year before:</label>
                        </div>
                        <div class="inline-inputs">
                            <label>Revenue= </label>
                            <input type="number" class="form-control" id="a_year_before_revenue" required>
                            <label>P/L=</label>
                            <input type="number" class="form-control" id="a_year_before_pl" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="customers">No Of Customers</label>
                        <input type="number" class="form-control" id="customers" required>
                    </div>
                    <div class="form-group">
                        <label for="competitors">Key Competitors</label>
                        <input type="text" class="form-control" id="competitors" required>
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-primary submit-button" onclick="saveProduct()">Add Product</button>

        </div>

        <!-- <div id="productList" class="product-list"></div> -->
        <div id="productList" class="product-list" style="display: none;"></div>
    </div>
</div>


<script>
    let products = [];
let editIndex = -1;

// Fetch and display products from the server when the page loads



async function fetchProducts() {
    try {
        const response = await fetch("{% url 'pitch_and_product' company.company_id %}", {
            method: 'GET',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
            }
        });

        if (!response.ok) {
            throw new Error('Failed to fetch products');
        }

        const data = await response.json();

        // Check if products exist
        if (data.products.length > 0) {
            // If products exist, display them
            products = data.products;
            displayProducts(); // Call your displayProducts function to render the products
            document.getElementById('entryForm').style.display = 'none'; // Hide form
        } else {
            // If no products, show the form
            document.getElementById('entryForm').style.display = 'block'; // Show form
            document.getElementById('productList').style.display = 'none'; // Hide product list
        }
    } catch (error) {
        console.error('Error fetching products:', error);
        alert('An error occurred while fetching products.');
    }
}

// Call fetchProducts when the page loads
fetchProducts();

// Function to display products in the list


function displayProducts() {
    const productList = document.getElementById('productList');
    productList.innerHTML = ''; // Clear the product list

    products.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.className = 'product-card display-mode'; // Use the same classes for styling
        productCard.innerHTML = `
            <div class="form-container">
                <div class="form-column">
                    <div class="form-group">
                        <label>Product Title</label>
                        <div class="form-control">${product.name}</div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <div class="form-control">${product.description}</div>
                    </div>
                    <div class="form-group">
                        <label>Industry / Sector</label>
                        <div class="form-control">${product.industry}</div>
                    </div>
                    <div class="form-group">
                        <label>Type of Business</label>
                        <div class="form-control">${product.type_of_business}</div>
                    </div>
                    <div class="form-group">
                        <label>Problems Solved</label>
                        <div class="form-control">${product.problem_solved}</div>
                    </div>
                </div>
                <div class="form-column">
                    <div class="form-group">
                        <label>Launch Date</label>
                        <div class="form-control">${product.launch_date}</div>
                    </div>
                    <div class="form-group">
                        <label>Three Year Revenue & Profit (INR lacs)</label>
                        <div class="form-control">Current Year Revenue: ${product.current_year_revenue}, Profit: ${product.current_year_pl}</div>
                        <div class="form-control">Previous Year Revenue: ${product.previous_year_revenue}, Profit: ${product.previous_year_pl}</div>
                        <div class="form-control">A Year Before Revenue: ${product.a_year_before_revenue}, Profit: ${product.a_year_before_pl}</div>
                    </div>
                    <div class="form-group">
                        <label>No Of Customers</label>
                        <div class="form-control">${product.customers}</div>
                    </div>
                    <div class="form-group">
                        <label>Key Competitors</label>
                        <div class="form-control">${product.competitors}</div>
                    </div>
                </div>
            </div>
           <div class="card-buttons">
    <button class="btn btn-edit" onclick="editProduct(${index})">
        <img src="{% static 'images/edit.png' %}">
    </button>
    <button class="btn btn-delete" onclick="deleteProduct(${index})">
         <img src="{% static 'images/delete.png' %}">
    </button>
</div>

 <hr style="border: 2px solid black; width: 100%; margin-top: 20px;"> 
       
        `;
        productList.appendChild(productCard); // Add the product card to the list
        
    });

    // Show the product list and hide the form
    document.getElementById('productList').style.display = 'block';
    document.getElementById('entryForm').style.display = 'none';
}


window.addEventListener('load', function() {
    // Adjust layout here if necessary, after all content has loaded
    document.querySelector('.scrollable-content').style.marginLeft = '250px'; // Example adjustment
});


function resetForm() {
    // Clear all form fields
    document.getElementById('name').value = '';
    document.getElementById('description').value = '';
    document.getElementById('industry').value = '';
    document.getElementById('type_of_business').value = '';
    document.getElementById('problem_solved').value = '';
    document.getElementById('launch_date').value = '';
    document.getElementById('current_year_revenue').value = '';
    document.getElementById('current_year_pl').value = '';
    document.getElementById('previous_year_revenue').value = '';
    document.getElementById('previous_year_pl').value = '';
    document.getElementById('a_year_before_revenue').value = '';
    document.getElementById('a_year_before_pl').value = '';
    document.getElementById('customers').value = '';
    document.getElementById('competitors').value = '';

    // Reset the button text to "Add Product"
    document.querySelector('.submit-button').innerText = 'Add Product';

    // Hide the form
    document.getElementById('entryForm').style.display = 'none';

    // Show the product list again
    //document.getElementById('productList').style.display = 'block';
}

// Save new or edited product





async function saveProduct() {
    // Collect values from the form fields
    const name = document.getElementById('name').value;
    const description = document.getElementById('description').value;
    const industry = document.getElementById('industry').value;
    const type_of_business = document.getElementById('type_of_business').value;
    const problem_solved = document.getElementById('problem_solved').value;
    const launch_date = document.getElementById('launch_date').value;
    const current_year_revenue = document.getElementById('current_year_revenue').value;
    const current_year_pl = document.getElementById('current_year_pl').value;
    const previous_year_revenue = document.getElementById('previous_year_revenue').value;
    const previous_year_pl = document.getElementById('previous_year_pl').value;
    const a_year_before_revenue = document.getElementById('a_year_before_revenue').value;
    const a_year_before_pl = document.getElementById('a_year_before_pl').value;
    const customers = document.getElementById('customers').value;
    const competitors = document.getElementById('competitors').value;

    // Create product object
    const product = {
        name,
        description,
        industry,
        type_of_business,
        problem_solved,
        launch_date,
        current_year_revenue,
        current_year_pl,
        previous_year_revenue,
        previous_year_pl,
        a_year_before_revenue,
        a_year_before_pl,
        customers,
        competitors
    };

    // Determine whether to create (POST) or update (PUT)
    const method = editIndex >= 0 ? 'PUT' : 'POST';
    const url = "{% url 'pitch_and_product' company.company_id %}";  // Ensure this URL is correct

    try {
        const response = await fetch(url, {
            method: method,
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}',  // Ensure CSRF token is sent for POST/PUT
            },
            body: JSON.stringify({ ...product, id: editIndex >= 0 ? products[editIndex].id : null })  // Include product ID for updates
        });

        const data = await response.json();

        if (!response.ok) {
            throw new Error(data.message || 'Failed to save the product.');
        }

        if (method === 'POST') {
            products.unshift({ ...product, id: data.id });  // Add new product to the list
        } else {
            products[editIndex] = { ...product, id: products[editIndex].id };  // Update existing product in the list
        }

        // Display updated product list
        displayProducts();

        // Hide the form and reset
        resetForm();

        // Reset the edit index
        editIndex = -1;

    } catch (error) {
        console.error('Error saving product:', error);
        alert('An error occurred while saving the product.');
    }
}




// Edit product







function editProduct(index) {
    // Set the edit index so we know we are in edit mode
    editIndex = index;
    const product = products[index];

    // Populate the form fields with the product data, handle undefined values
    document.getElementById('name').value = product.name || '';
    document.getElementById('description').value = product.description || '';
    document.getElementById('industry').value = product.industry || '';
    document.getElementById('type_of_business').value = product.type_of_business || '';
    document.getElementById('problem_solved').value = product.problem_solved || '';
    document.getElementById('launch_date').value = product.launch_date || '';
    document.getElementById('current_year_revenue').value = product.current_year_revenue || '';
    document.getElementById('current_year_pl').value = product.current_year_pl || '';
    document.getElementById('previous_year_revenue').value = product.previous_year_revenue || '';
    document.getElementById('previous_year_pl').value = product.previous_year_pl || '';
    document.getElementById('a_year_before_revenue').value = product.a_year_before_revenue || '';
    document.getElementById('a_year_before_pl').value = product.a_year_before_pl || '';
    document.getElementById('customers').value = product.customers || '';
    document.getElementById('competitors').value = product.competitors || '';

    // Change the button text from "Add Product" to "Save Product"
    document.querySelector('.submit-button').innerText = 'Save Product';

    // Ensure the form is visible
    document.getElementById('entryForm').style.display = 'block';  // Show the form

    // Optionally hide the product list if needed
    document.getElementById('productList').style.display = 'none';

    // Scroll to the form if needed
    window.scrollTo(0, document.getElementById('entryForm').offsetTop);
}



// Delete product

async function deleteProduct(index) {
    const product = products[index];

    if (!product.id) {
        console.error('Product ID is undefined');
        return;
    }

    // Immediately remove product from UI
    products.splice(index, 1);
    displayProducts();

    try {
        // Send DELETE request to the server
        await fetch("{% url 'pitch_and_product' company.company_id %}", {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify({ id: product.id })
        });

        console.log('Product with ID ${product.id} deleted from database.');
    } catch (error) {
        console.error('Error deleting product from the database:', error);
        alert('An error occurred while deleting the product from the database.');
        // Revert the UI change if the delete request fails
        products.splice(index, 0, product);  // Reinsert the deleted product back into the array
        displayProducts();  // Re-render the UI to show the reverted product
    }
}
// Toggle form visibility
function toggleForm() {
    const entryForm = document.getElementById('entryForm');
    entryForm.style.display = (entryForm.style.display === 'none' || entryForm.style.display === '') ? 'block' : 'none';

    // Hide the product list when showing the form
    document.getElementById('productList').style.display = 'none';
}



function toggleForm2() {
    // Show the form
    document.getElementById('entryForm').style.display = 'block';

    // Hide the product list
    document.getElementById('productList').style.display = 'none';

    // Clear any previous values in the form (optional, if you're resetting the form)
    resetForm();

    // Optionally change the submit button text back to "Add Product" in case it was in "Edit" mode
    document.querySelector('.submit-button').innerText = 'Add Product';

    // Reset edit index to prevent editing behavior
    editIndex = -1;
}

// Initialize the page
fetchProducts(); // Load products when the page is loaded

 // Initialize the page
 displayProducts();
 if (products.length === 0) {
    document.getElementById('entryForm').style.display = 'block';  // Make sure form is displayed
    document.querySelector('.submit-button').style.display = 'block';  // Ensure button is not hidden
}





</script>
        
</body>
{% endblock content %}